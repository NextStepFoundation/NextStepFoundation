function ProgramFinderBasic(){this.areaOfStudy="*",this.degreeLevel="*",this.program="*",this.filterType=null,this.programData=[],this.filteredProgramData=[],this.displayResultsCount=10,this.renderedAOS=new Set,this.areaOfStudyDropdown=$(".inline-program-finder #pf-areaOfStudy"),this.degreeLevelDropdown=$(".inline-program-finder #pf-degreeLevel"),this.programDropdown=$(".inline-program-finder #pf-program"),this.concentration=$(".inline-program-finder .concentration-div"),this.viewProgramButton=$(".inline-program-finder #program-finder"),this.fieldList="custom_i_course_length,custom_i_required_credits_high,custom_i_required_credits_low,custom_s_url,id,custom_ss_areas_of_study,custom_t_description,custom_ss_concentration,custom_i_cpch_non_resident,custom_t_program,custom_i_degree_sortorder,custom_s_degree,custom_s_program_code_sif",this.init=function(){this.addEventListeners(),this.getInitialData()},this.getInitialData=function(){querySolr(buildQuery("&fl="+this.fieldList+"&rows=1000",!1)).then(e=>{this.programData=this.formatResponse(e.response.docs),this.filteredProgramData=this.programData,this.populateFilterDropdown({aos:!0,degreeLevel:!0,programs:!0}),this.areaOfStudyDropdown.attr("disabled","disabled"),this.programDropdown.attr("disabled","disabled"),this.enableViewProgramButton(!1)}).catch(e=>{console.error("Failed to fetch programs from solr",e)})},this.showResults=function(){this.renderedAOS.clear(),this.concentration.html(""),this.viewProgramButton.removeAttr("href")},this.renderResults=function(e){e.forEach(e=>{e=formatProgramData(e),this.renderedAOS.add(e.areaOfStudy),this.concentration.append(this.createConcentrationMarkup(e)),this.viewProgramButton.attr("href",e.custom_s_url_formatted),initializeTootltip()})},this.createConcentrationMarkup=function(e){return""+getConcentrationHtml(e.custom_ss_concentration)},this.populateFilterDropdown=function(e){var{areaOfStudies:t,degreeLevels:r,programs:o}=this.processDropDownData(this.filteredProgramData);e.aos&&this.addDropdownOptions(this.areaOfStudyDropdown,t,"Area of Study"),e.degreeLevel&&this.addDropdownOptions(this.degreeLevelDropdown,r,"Degree Level"),e.programs&&this.addDropdownOptions(this.programDropdown,o,"Program")},this.processDropDownData=function(e){let r=[],o=[],a=[];return e.forEach(t=>{r.find(e=>t.areaOfStudy===e.value)||r.push({name:t.areaOfStudy,value:t.areaOfStudy}),o.find(e=>t.custom_s_degree===e.value)||o.push({name:t.custom_s_degree,value:t.custom_s_degree,sort:t.custom_i_degree_sortorder}),a.push({name:decodeHtmlEntities(t.custom_t_program),value:t.custom_t_program,aos:t.areaOfStudy})}),o.sort((e,t)=>e.sort-t.sort),{areaOfStudies:r,degreeLevels:o,programs:a}},this.formatResponse=function(e){return results=[],e.forEach(t=>{t.custom_ss_areas_of_study.forEach(e=>{t.areaOfStudy=e,results.push({...t})})}),results.sort(function(e,t){return+(e.areaOfStudy>t.areaOfStudy)||(e.areaOfStudy===t.areaOfStudy)-1||+(t.custom_i_degree_sortorder<e.custom_i_degree_sortorder)||(e.custom_i_degree_sortorder===t.custom_i_degree_sortorder)-1}),results},this.handleAosChange=function(t){"*"===t.target.value&&"aos"==this.filterType?(this.filteredProgramData=this.programData,this.populateFilterDropdown({degreeLevel:!0,programs:!0}),this.resetFilters()):"*"===t.target.value&&"degreeLevel"==this.filterType?(this.filteredProgramData=this.programData.filter(e=>e.custom_s_degree===this.degreeLevel),this.populateFilterDropdown({programs:!0})):this.checkForExistingFilters()&&"aos"!==this.filterType?(this.filteredProgramData=this.programData.filter(e=>("*"===this.degreeLevel||e.custom_s_degree===this.degreeLevel)&&e.areaOfStudy===t.target.value),this.populateFilterDropdown({programs:!0})):(this.filterType="aos",this.filteredProgramData=this.programData.filter(e=>e.areaOfStudy===t.target.value),this.populateFilterDropdown({degreeLevel:!0,programs:!0})),this.showResults(),this.areaOfStudy=t.target.value},this.resetFilters=function(){this.filterType="",this.degreeLevel="*",this.program="*",this.areaOfStudy="*"},this.handleDegreeLevelChange=function(t){"*"===t.target.value&&"degreeLevel"==this.filterType?(this.filteredProgramData=this.programData,this.populateFilterDropdown({aos:!0,programs:!0}),this.resetFilters()):"*"===t.target.value&&"aos"===this.filterType?(this.filteredProgramData=this.programData.filter(e=>e.areaOfStudy===this.areaOfStudy),this.populateFilterDropdown({programs:!0})):this.checkForExistingFilters()&&"degreeLevel"!==this.filterType?(this.filteredProgramData=this.programData.filter(e=>("*"===this.areaOfStudy||e.areaOfStudy===this.areaOfStudy)&&e.custom_s_degree===t.target.value),this.populateFilterDropdown({programs:!0})):(this.filterType="degreeLevel",this.filteredProgramData=this.programData.filter(e=>e.custom_s_degree===t.target.value),this.populateFilterDropdown({aos:!0,programs:!0})),this.showResults(),this.degreeLevel=t.target.value},this.handleProgramChange=function(e){this.program=e.target.value,this.filteredProgramData=this.programData.filter(e=>!("*"!=this.areaOfStudy&&e.areaOfStudy!=this.areaOfStudy||"*"!=this.degreeLevel&&e.custom_s_degree!=this.degreeLevel||"*"!=this.program&&e.custom_t_program!==this.program)),this.showResults(),this.renderResults(this.filteredProgramData.slice(0,this.displayResultsCount-1))},this.enableViewProgramButton=function(e){e?(this.viewProgramButton.removeClass("disabled"),this.viewProgramButton.attr("tabindex",0)):(this.viewProgramButton.addClass("disabled"),this.viewProgramButton.attr("tabindex",-1))},this.checkForExistingFilters=function(){return"*"!==this.areaOfStudy||"*"!==this.degreeLevel},this.addDropdownOptions=function(e,t,r){let o=[];o.push(new Option(r,"*",!0,!0)),t.forEach(function(e){o.push(new Option(e.name,e.value))}),e.html(o)},this.addEventListeners=function(){this.areaOfStudyDropdown.on("change",e=>{this.handleAosChange(e),this.enableViewProgramButton(!1),"*"!=this.areaOfStudy?this.programDropdown.removeAttr("disabled"):this.programDropdown.attr("disabled","disabled")}),this.degreeLevelDropdown.on("change",e=>{this.handleDegreeLevelChange(e),this.programDropdown.attr("disabled","disabled"),this.enableViewProgramButton(!1),"*"!=this.degreeLevel?this.areaOfStudyDropdown.removeAttr("disabled"):this.areaOfStudyDropdown.attr("disabled","disabled"),console.log(this.degreeLevel)}),this.programDropdown.on("change",e=>{this.handleProgramChange(e),this.enableViewProgramButton(!0)})}}function initializeTootltip(){$(".tootip-toggle").on("click",function(e){e.preventDefault();e=$(".tooltip-info:visible");1===e.length&&e.addClass("hide"),$(this).parent().find(".tooltip-info").removeClass("hide")}),$(".close-tooltip").on("click",function(e){e.preventDefault(),$(this).parent().parent().toggleClass("hide")})}function groupBy(e,o){return e.reduce((e,t)=>{var r=t[o];return e[r]||(e[r]=[]),e[r].push(t),e},{})}function formatProgramData(e,t=""){return t=t.split("?"),e.custom_i_course_length_formatted=6==e.custom_i_course_length?"20 Hours/Week ":10==e.custom_i_course_length?"15&ndash;18 Hours/Week":"",e.custom_required_credits_formatted=e.custom_i_required_credits_high?e.custom_i_required_credits_low+"&ndash;"+e.custom_i_required_credits_high:e.custom_i_required_credits_low,e.creditsHigh=e.custom_i_required_credits_high||e.custom_i_required_credits_low,e.custom_s_url_formatted=1<t.length?t[0]+e.custom_s_url+"?"+t[1]:t[0]+e.custom_s_url,e}function getConcentrationHtml(e){if(!e||0==e.length)return"";let t="";return e.forEach(e=>{t+=`<li>${e}</li>`}),`
      <span class="tootip-toggle">
        <a role="button" class="concentration-tooltip"><i class="far fa-info-circle" aria-hidden="true"></i>${e.length} Concentrations Available</a>
      </span>
      <div class="tooltip-info hide">
        <div class="tt-close"><a role="button" class="close-tooltip">X</a></div>
        <ul class="concentration-list">${t}</ul>
     </div>
     `}function decodeHtmlEntities(e){return e.replace(/&#(\d+);/g,function(e,t){return String.fromCodePoint(parseInt(t,10))})}document.addEventListener("DOMContentLoaded",function(e){0<$(".inline-program-finder").length&&(new ProgramFinderBasic).init()});var solrCollection=0<=document.location.href.indexOf("mkt.kaplan.com")?"kaplan-programdatabase-stage":"kaplan-programdatabase-live";let solarEndPoint="/handlers/solrproxy.ashx?solrurl="+solrCollection+"/select?",defaultQuery='q=*:*&wt=json&fq=custom_s_table:"Online%20Programs"&fq=custom_s_institution_id:PGU&fq=custom_ss_enabled_features:"Homepage%20Program%20Selector%20and%20Results"&fq=custom_s_program_enabled:Yes',facetQuery="&facet=true&facet.mincount=1&facet.limit=500";function buildQuery(e,t,r=!1){let o=(t=t||!1)?defaultQuery+facetQuery:defaultQuery;return o=r?o.replace("q=*:*&",""):o,decodeURI(o+e)}function querySolr(e){return e=solarEndPoint+e,new Promise(function(r,o){$.ajax({type:"GET",dataType:"json",url:e,timeout:2e4,success:function(e,t){r(e)},fail:function(e,t,r){console.error("solr query  failed",r),o(r)}})})}